# Meson cross-compilation file for Android ARM64 (aarch64)
# API Level 24 (Android 7.0) - минимальная версия для вашего проекта

[binaries]
c = 'aarch64-linux-android24-clang'
cpp = 'aarch64-linux-android24-clang++'
ar = 'llvm-ar'
strip = 'llvm-strip'
ranlib = 'llvm-ranlib'
ld = 'ld.lld'
pkgconfig = 'pkg-config'

# Для некоторых проектов может понадобиться
cmake = 'cmake'

[properties]
# Важно: указываем, что это Android, а не обычный Linux
needs_exe_wrapper = true
sys_root = '/opt/android-ndk/sysroot'

# Android-specific свойства
c_args = [
  '-DANDROID',
  '-D__ANDROID_API__=24',
  '-fPIC',
  '-ffunction-sections',
  '-fdata-sections',
]

cpp_args = [
  '-DANDROID',
  '-D__ANDROID_API__=24',
  '-fPIC',
  '-ffunction-sections',
  '-fdata-sections',
]

c_link_args = [
  '-Wl,--gc-sections',
  '-Wl,--as-needed',
]

cpp_link_args = [
  '-Wl,--gc-sections',
  '-Wl,--as-needed',
]

[host_machine]
system = 'android'
cpu_family = 'aarch64'
cpu = 'armv8-a'
endian = 'little'